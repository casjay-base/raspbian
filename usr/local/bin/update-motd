#!/usr/bin/env bash

APPNAME="clean-system"
USER="${SUDO_USER:-${USER}}"
HOME="${USER_HOME:-${HOME}}"
PATH="/usr/games:$PATH"

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
# @Author      : Jason
# @Contact     : jason@casjaysdev.com
# @File        : clean-system
# @Created     : Mon, Dec 31, 2019, 00:00 EST
# @License     : WTFPL
# @Copyright   : Copyright (c) CasjaysDev
# @Description : Update the MOTD file
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

if [ -f "/etc/casjaysdev/messages/legal.txt" ]; then
  sudo cp -Rf /etc/casjaysdev/messages/legal.txt /etc/issue
fi

if [ -n "$(command -v fortune 2>/dev/null)" ] && [ -n "$(command -v cowsay 2>/dev/null)" ]; then
  printf "\n\n" | sudo tee > /etc/motd
  fortune | cowsay | sudo tee >> /etc/motd 
  printf "\n" | sudo tee >> /etc/motd
else
  printf "\n" | sudo tee >> /etc/motd
fi
printf "Raspbian version: $(cat /etc/debian_version)\t|\tConfig version: $(cat /etc/casjaysdev/updates/versions/configs.txt)" | sudo tee >> /etc/motd
printf "The configurations where last updated on: $(cat /etc/casjaysdev/updates/versions/date.configs.txt)" | sudo tee >> /etc/motd
printf "\n" | sudo tee >> /etc/motd
sudo cp -Rf /etc/motd /etc/motd.net
sudo cp -Rf /etc/issue /etc/issue.net

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

exit $?
